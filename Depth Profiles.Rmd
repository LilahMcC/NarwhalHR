---
title: "Depth Profiles"
author: "Lilah McCormick"
date: '2022-06-30'
output: 
  html_document:
    toc: yes
    toc_float: yes 
    theme: default 
    highlights: monotone
---

### Before Starting: load libraries
```{r = load_packages, messages = FALSE, echo = FALSE}
library(lubridate)
library(tidyverse)
library(plotly)
library(DT)
library(glue)
```


### Task 1 and 2:  
Read the file into a dataframe, and make DateTimes compatible with POSIXct 
```{r = fix_datetimes, messages = FALSE}
depth_data <- read_tsv("Depth_Asgeir.txt") %>% 
  mutate(DateTime = mdy_hms(`Date time`), .keep = "unused")#fixes datetime
```

### Task 3   
**Make Figures**  
1. Depth profile for the whole deployment  
1. Depth profile for 1 day   
1. Depth profile for 1 dive   

```{r plot_deployment, messages = FALSE, echo = FALSE}
deployment_plot <- ggplot(depth_data, aes(x = DateTime, y = Depth)) + 
  geom_line() +
  scale_y_reverse() + #makes depth right orientation 
  labs(title = "Asgeir Depth Profile 2018",
       x = "Time",
       y = "Depth (m)") + #changes labels on axes and title 
  theme_bw()  #white background 
deployment_plot
```

```{r plot_day, messages = FALSE, echo = FALSE}
start_day <- ymd_hms('2018-08-24 00:00:00')
end_day <- start_day + days(1)
one_day <- filter(depth_data, DateTime >= start_day, DateTime <= end_day)
day_plot<- ggplot(one_day, aes(x = DateTime, y = Depth)) + #filters datetime to 24 hour period
  geom_line() +
  scale_y_reverse() + #makes depth right orientation 
  labs(title = "Asgeir 24 Hour Depth Profile 2018",
       x = "Time",
       y = "Depth (m)") + #changes labels on axes and title 
  theme_bw()  #white background 
ggplotly(day_plot) #makes plot interactive 
```

```{r plot_one_dive, message = FALSE, echo = FALSE}
start_dive_time <- ymd_hms('2018-08-24 08:26:01') #selected times from interactive day plot 
end_dive_time <- ymd_hms('2018-08-24 08:49:04')
one_dive <- filter(depth_data, DateTime >= start_dive_time, DateTime <= end_dive_time)
dive_plot <- ggplot(one_dive, aes(x = DateTime, y = Depth)) + #filters datetime to 24 hour period
  geom_line() +
  scale_y_reverse() + #makes depth right orientation 
  labs(title = "Asgeir Single Dive Depth Profile 2018",
       x = "Time",
       y = "Depth (m)") + #changes labels on axes and title 
  theme_bw()  #white background 
#ggplotly(dive_plot)
dive_plot
```



